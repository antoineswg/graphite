<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graphite</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='images/logo/logo-ico.svg') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/buttons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chips.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modes.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/console.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modal.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/configs.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/stats.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/toast.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="header-meta">
            made by <a href="https://a.ntoine.fr" target="_blank">antoine!</a> <br>
            <span id="timestamp"></span>
        </div>
        <div class="header-title">
            <img src="{{ url_for('static', filename='images/logo/logo-dark.svg') }}" alt="Graphite Logo"
                class="logo logo-dark">
            <img src="{{ url_for('static', filename='images/logo/logo-light.svg') }}" alt="Graphite Logo"
                class="logo logo-light">
            <div>
                <h1>GRAPHITE</h1>
                <p class="subtitle">Discord Message Automation</p>
            </div>
            <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" aria-label="Toggle theme">
                <span class="theme-icon">◐</span>
            </button>
        </div>

        <div class="warning">
            <strong>// NOTICE:</strong> This tool uses selfbot functionality which violates Discord's Terms of Service.
            Account termination is possible. You've been warned, do not blame me.
        </div>

        <div class="shortcuts-hint">
            <span class="shortcut-item">Press <kbd>H</kbd> for shortcuts</span>
        </div>

        <div id="status" class="status stopped">
            <span id="statusText">OFFLINE</span>
        </div>

        <div class="form-group">
            <label>Config Management</label>
            <div class="config-selector">
                <select id="configSelect" onchange="switchConfig()"></select>
                <button class="btn btn-secondary" onclick="showConfigManager()">Manage</button>
            </div>
            <p class="info-text">Switch between multiple Discord configurations</p>
        </div>

        <div class="form-group">
            <div class="label-with-help">
                <label for="token">Discord Token</label>
                <button class="btn-help" onclick="showTokenHelp()" type="button">?</button>
            </div>
            <input type="text" id="token" placeholder="YOUR_TOKEN_HERE">
            <p class="info-text">Personal Discord account token // Keep confidential</p>
        </div>

        <div class="form-group">
            <div class="label-with-help">
                <label for="channelId">Channel ID</label>
                <button class="btn-help" onclick="showChannelHelp()" type="button">?</button>
            </div>
            <input type="text" id="channelId" placeholder="123456789012345678">
            <p class="info-text">Target channel identifier</p>
        </div>

        <div class="form-group">
            <label>Message Pool</label>
            <div class="times-container" id="messagesContainer">
            </div>
            <div class="message-input-container">
                <textarea id="newMessage" placeholder="Enter message content..." rows="3"></textarea>
                <button class="btn btn-secondary" onclick="addMessage()">+ Add to pool</button>
            </div>
            <p class="info-text">Multiple messages available // Random selection on send</p>
        </div>

        <div class="form-group">
            <label>Transmission Delay</label>
            <div class="checkbox-group">
                <input type="checkbox" id="delayEnabled">
                <label for="delayEnabled">Enable randomized delay</label>
            </div>
            <div class="delay-group" id="delaySettings">
                <div>
                    <input type="number" id="minDelay" placeholder="0" min="0">
                    <p class="info-text">Min seconds</p>
                </div>
                <div>
                    <input type="number" id="maxDelay" placeholder="0" min="0">
                    <p class="info-text">Max seconds</p>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Execution Settings</label>
            <div class="checkbox-group">
                <input type="checkbox" id="dryRun">
                <label for="dryRun">Dry run mode (preview only, don't send)</label>
            </div>
            <p class="info-text">Enable to test without sending actual messages to Discord</p>
        </div>

        <div class="form-group">
            <label>Operation Mode</label>
            <div class="mode-selector">
                <button type="button" class="mode-btn active" data-mode="spam" onclick="selectMode('spam')">
                    Spam
                </button>
                <button type="button" class="mode-btn" data-mode="scheduled" onclick="selectMode('scheduled')">
                    Scheduled
                </button>
                <button type="button" class="mode-btn" data-mode="random_window" onclick="selectMode('random_window')">
                    Random Window
                </button>
            </div>

            <div class="mode-config" id="config-scheduled">
                <label>Scheduled Send Times</label>
                <div class="times-container" id="timesContainer">
                </div>
                <div class="add-time-group">
                    <input type="time" id="newTime">
                    <button class="btn btn-secondary" onclick="addTime()">+ Add Time</button>
                </div>
                <p class="info-text">24-hour format // Daily execution at specified times</p>
            </div>

            <div class="mode-config active" id="config-spam">
                <label for="spamInterval">Message Interval</label>
                <input type="number" id="spamInterval" placeholder="1" value="1" min="1">
                <p class="info-text">Seconds between consecutive messages</p>
            </div>

            <div class="mode-config" id="config-random_window">
                <label>Execution Window</label>
                <div class="delay-group">
                    <div>
                        <input type="time" id="windowStart" value="09:00">
                        <p class="info-text">Window start</p>
                    </div>
                    <div>
                        <input type="time" id="windowEnd" value="09:05">
                        <p class="info-text">Window end</p>
                    </div>
                </div>
                <label for="messagesCount" class="spacing-top">Message Count</label>
                <input type="number" id="messagesCount" placeholder="10" value="10" min="1">
                <p class="info-text">Total messages distributed randomly within time window</p>
            </div>
        </div>

        <div class="button-group">
            <button class="btn btn-success" id="startBtn" onclick="startBot()">
                Start
            </button>
            <button class="btn btn-danger" id="stopBtn" onclick="stopBot()" disabled>
                Stop
            </button>
        </div>

        <div class="shortcuts-hint">
            <span class="shortcut-item"><kbd>SPACE</kbd> Start/Stop</span>
        </div>

        <div class="console-window" id="consoleWindow">
            <div class="log-entry">Graphite is ready to run. </div>
        </div>

        <div class="button-group log-buttons">
            <button id="copyLogsBtn" class="btn btn-secondary" onclick="copyLogsToClipboard()" disabled>
                Copy Logs
            </button>
            <button id="exportLogsBtn" class="btn btn-secondary" onclick="exportLogsToFile()" disabled>
                Export Logs
            </button>
        </div>

        <div id="statsPanel">
            <div class="form-group">
                <label>Session Statistics</label>
                <div class="stats-chart-container">
                    <canvas id="messageStatsChart"></canvas>
                </div>
                <p class="info-text">Distribution of sent messages</p>
            </div>
        </div>

        <div class="github-link">
            <a href="https://github.com/antoineswg/graphite" target="_blank">View on GitHub, feel free to tinker with
                it</a>
        </div>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <div id="tokenHelpModal" class="modal" onclick="if(event.target === this) closeTokenHelp()">
        <div class="modal-content">
            <span class="modal-close" onclick="closeTokenHelp()">&times;</span>
            <div class="modal-header">
                <h2>How to Get Your Discord Token</h2>
                <span class="modal-kbd-hint"><kbd>ESC</kbd> to close</span>
            </div>
            <div class="modal-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <strong>Open Discord in Browser</strong>
                        <p>Go to <a href="https://discord.com/app" target="_blank">discord.com/app</a> and log in</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <strong>Open Developer Tools</strong>
                        <p>Press <code>Ctrl+Shift+I</code> or <code>F12</code>, then click on the <span
                                class="highlight">Network</span> tab</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <strong>Switch Text Channels</strong>
                        <p>Open a different text channel than the one you already had open (to force Discord to fetch
                            messages)</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <strong>Find the Messages Request</strong>
                        <p>In the Network tab, look for the <code>messages?limit=50</code> request. You can filter by
                            <span class="highlight">Fetch/XHR</span> or search for it. Click on the request when you
                            find it.
                        </p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <strong>Copy Authorization Header</strong>
                        <p>Under the <span class="highlight">Headers</span> section, scroll to <span
                                class="highlight">Request Headers</span>, then find <span
                                class="highlight">Authorization</span>. The value of that header is your token.</p>
                    </div>
                </div>
            </div>
            <div class="modal-warning">
                <strong>WARNING:</strong> Be extremely careful with your token. This token proves you are you to Discord
                and gives full access to your account. Never share it with anyone. Using selfbots violates Discord's
                Terms of Service and may result in account termination.
            </div>
        </div>
    </div>

    <div id="channelHelpModal" class="modal" onclick="if(event.target === this) closeChannelHelp()">
        <div class="modal-content">
            <span class="modal-close" onclick="closeChannelHelp()">&times;</span>
            <div class="modal-header">
                <h2>How to Get Channel ID</h2>
                <span class="modal-kbd-hint">Press <kbd>ESC</kbd> to close</span>
            </div>
            <div class="modal-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <strong>Enable Developer Mode</strong>
                        <p>In Discord, go to <span class="highlight">User Settings</span> → <span
                                class="highlight">Advanced</span> → Enable <span class="highlight">Developer Mode</span>
                        </p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <strong>Right-Click the Channel</strong>
                        <p>Right-click on the channel name where you want to send messages</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <strong>Copy Channel ID</strong>
                        <p>Click <span class="highlight">Copy Channel ID</span> at the bottom of the menu</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <strong>Paste the ID</strong>
                        <p>Paste the ID into the Channel ID field above. It will be a long number like
                            <code>123456789012345678</code>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="shortcutsHelpModal" class="modal" onclick="if(event.target === this) closeShortcutsHelp()">
        <div class="modal-content">
            <span class="modal-close" onclick="closeShortcutsHelp()">&times;</span>
            <div class="modal-header">
                <h2>Keyboard Shortcuts</h2>
                <span class="modal-kbd-hint">Press <kbd>ESC</kbd> to close</span>
            </div>
            <div class="shortcuts-grid">
                <div class="shortcuts-section">
                    <h3>General</h3>
                    <div class="shortcut-row">
                        <kbd>SPACE</kbd>
                        <span>Start/Stop bot</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>H</kbd>
                        <span>Show shortcuts</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>T</kbd>
                        <span>Toggle theme</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>ESC</kbd>
                        <span>Close modals</span>
                    </div>
                </div>

                <div class="shortcuts-section">
                    <h3>Focus</h3>
                    <div class="shortcut-row">
                        <kbd>Ctrl+K</kbd>
                        <span>Focus token field</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>Ctrl+L</kbd>
                        <span>Focus channel field</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>Ctrl+M</kbd>
                        <span>Focus message field</span>
                    </div>
                </div>

                <div class="shortcuts-section">
                    <h3>Actions</h3>
                    <div class="shortcut-row">
                        <kbd>Ctrl+Enter</kbd>
                        <span>Add message to pool</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>Ctrl+R</kbd>
                        <span>Clear console</span>
                    </div>
                </div>

                <div class="shortcuts-section">
                    <h3>Modes</h3>
                    <div class="shortcut-row">
                        <kbd>1</kbd>
                        <span>Spam mode</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>2</kbd>
                        <span>Scheduled mode</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>3</kbd>
                        <span>Random window mode</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>M</kbd>
                        <span>Cycle through modes</span>
                    </div>
                </div>

                <div class="shortcuts-section">
                    <h3>Toggles</h3>
                    <div class="shortcut-row">
                        <kbd>D</kbd>
                        <span>Toggle delay</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>Y</kbd>
                        <span>Toggle dry run</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>Ctrl+D</kbd>
                        <span>Toggle dry run</span>
                    </div>
                </div>

                <div class="shortcuts-section">
                    <h3>Console</h3>
                    <div class="shortcut-row">
                        <kbd>↑</kbd>
                        <span>Scroll up</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>↓</kbd>
                        <span>Scroll down</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>Ctrl+E</kbd>
                        <span>Export logs to file</span>
                    </div>
                    <div class="shortcut-row">
                        <kbd>Ctrl+Shift+C</kbd>
                        <span>Copy logs to clipboard</span>
                    </div>
                </div>
            </div>
            <div class="modal-note">
                <strong>Note:</strong> Use <kbd>Cmd</kbd> instead of <kbd>Ctrl</kbd> on Mac
            </div>
        </div>
    </div>

    <div id="configManagerModal" class="modal" onclick="if(event.target === this) closeConfigManager()">
        <div class="modal-content">
            <span class="modal-close" onclick="closeConfigManager()">&times;</span>
            <div class="modal-header">
                <h2>Config Manager</h2>
                <span class="modal-kbd-hint">Press <kbd>ESC</kbd> to close</span>
            </div>
            <div id="configsList"></div>
            <div id="configsList"></div>
            <button class="btn btn-secondary add-config-btn" onclick="addNewConfig()">+ Add New
                Config</button>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/state.js') }}"></script>
    <script src="{{ url_for('static', filename='js/stats.js') }}"></script>
    <script src="{{ url_for('static', filename='js/toast.js') }}"></script>
    <script src="{{ url_for('static', filename='js/configs.js') }}"></script>
    <script src="{{ url_for('static', filename='js/api.js') }}"></script>
    <script src="{{ url_for('static', filename='js/ui.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bot.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>